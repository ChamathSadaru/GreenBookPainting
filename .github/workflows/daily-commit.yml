name: Daily Auto Commit (Dark Green)

on:
  schedule:

    - cron: '0 0 * * *'
  

  workflow_dispatch:

jobs:
  auto-commit-job:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Repository එක checkout කිරීම
        uses: actions/checkout@v4

      - name: Git User සකස් කිරීම
  
        run: |
          git config --global user.name "Chamath Sandaru"
          git config --global user.email "chamathsandaru.se@gmail.com"

      - name: Commits 20ක් දැමීම (Loop)
        run: |
          # 1 සිට 20 දක්වා Loop එකක් ක්‍රියාත්මක වේ
          for i in {1..20}
          do
            # File එකට අලුත් වේලාවක් ලියනවා
            echo "Auto commit number $i: $(date)" > last-update.txt
            
            # වෙනස add කරනවා
            git add last-update.txt
            
            # Commit කරනවා (Message එකත් එක්ක)
            git commit -m "Auto commit $i/20 - $(date)"
            
            # තත්පර 1ක් ඉන්නවා (Time stamp ඝට්ටනය නොවීමට)
            sleep 1
          done

      - name: වෙනස්කම් Push කිරීම
     
        run: git push
